<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Primary Meta Tags -->
        <title>Lars Erik Schonander</title>
        <meta name="title" content="Lars Erik Schonander">
        <meta name="description" content="Personal writing, links, and other miscellanea by Lars Erik Schonander. ">

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://www.larserikschonander.com/">
        <meta property="og:title" content="Lars Erik Schonander">
        <meta property="og:description" content="Personal writing, links, and other miscellanea by Lars Erik Schonander. ">
        <meta property="og:image" content>

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://www.larserikschonander.com/">
        <meta property="twitter:title" content="Lars Erik Schonander">
        <meta property="twitter:description" content="Personal writing, links, and other miscellanea by Lars Erik Schonander. ">
        <meta property="twitter:image" content>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="shortcut icon" href="../images/icon_HSn_icon.ico" type="image/x-icon" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-121467707-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-121467707-1');
    </script>
    </head>
    <body>  
        <h1 id="name">Lars E. Schonander</h1>
        <header>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            
        </header>

        <main role="main">
            <h1>A Bayesian Work Through, Part One</h1>
            <article>
    <section class="header">
        Posted on August 27, 2019
        
    </section>
    <section>
        <p>I recently finished reading David Robinson’s book <a href="http://varianceexplained.org/r/empirical-bayes-book/">Introduction to Empirical Bayes</a> but realized I had a problem. That problem being, how to apply what I learned to difficult problems and datasets?</p>
<p>To solve this problem, I hunted down a different dataset which Bayesian data analysis methods can be useful. I ended up work with a dataset related to Fortnite, which due to being a e-sport, sabermetric style analytical methods work as well.</p>
<h3 id="setup">Setup</h3>
<p>To begin, the dataset needed to have some feature engineering done to it, mainly to create the sabermetric style measures.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">statistics <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">total_kills =</span> Eliminations <span class="op">+</span><span class="st"> </span>Assists,</a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="dt">head_to_hit_ratio =</span> <span class="st">`</span><span class="dt">Head Shots</span><span class="st">`</span> <span class="op">/</span><span class="st"> </span>Hits, </a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="dt">kill_to_head_ratio =</span> <span class="st">`</span><span class="dt">Head Shots</span><span class="st">`</span> <span class="op">/</span><span class="st"> </span>total_kills,</a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="dt">Accuracy =</span> <span class="kw">as.numeric</span>(<span class="kw">str_replace</span>(statistics<span class="op">$</span>Accuracy, <span class="st">&quot;%&quot;</span>, <span class="st">&quot;&quot;</span>)),</a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="dt">materials_ratio =</span> <span class="st">`</span><span class="dt">Materials Gathered</span><span class="st">`</span> <span class="op">/</span><span class="st"> `</span><span class="dt">Materials Used</span><span class="st">`</span>,</a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="dt">player_damage_ratio =</span> <span class="st">`</span><span class="dt">Damage to Players</span><span class="st">`</span> <span class="op">/</span><span class="st"> `</span><span class="dt">Damage Taken</span><span class="st">`</span>,</a>
<a class="sourceLine" id="cb1-9" title="9">  ) -&gt;<span class="st"> </span>statistics</a></code></pre></div>
<p>While David used <em>hits</em>(H) and <em>hits at bat</em>(AB) as the main variables to look at to track player performance, we don’t quite have a equal measurement to that. In this case, as a gauge of skill, I used <em>Head Shots</em> and <em>Hits</em> as the variables I wanted analyze using the Bayesian methods David wrote in the book about.</p>
<p>To actually get alpha and beta, I reused a few lines of code that David used to the alpha and beta.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">logLikelihood &lt;-<span class="st"> </span><span class="cf">function</span>(alpha, beta){</a>
<a class="sourceLine" id="cb2-2" title="2">  x &lt;-<span class="st"> </span>statistics<span class="op">$</span><span class="st">`</span><span class="dt">Head Shots</span><span class="st">`</span></a>
<a class="sourceLine" id="cb2-3" title="3">  total &lt;-<span class="st"> </span>statistics<span class="op">$</span>Hits</a>
<a class="sourceLine" id="cb2-4" title="4">  </a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="op">-</span><span class="kw">sum</span>(VGAM<span class="op">::</span><span class="kw">dbetabinom.ab</span>(x, total, alpha, beta, <span class="dt">log =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb2-6" title="6">}</a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw">library</span>(stats4)</a>
<a class="sourceLine" id="cb2-10" title="10">m &lt;-<span class="st"> </span><span class="kw">mle</span>(logLikelihood, </a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="dt">start =</span> <span class="kw">list</span>(<span class="dt">alpha =</span> <span class="dv">1</span>, <span class="dt">beta =</span> <span class="dv">10</span>), </a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="dt">method =</span> <span class="st">&quot;L-BFGS-B&quot;</span>, </a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="dt">lower =</span> <span class="kw">c</span>(<span class="fl">0.0001</span>, <span class="fl">.1</span>))</a>
<a class="sourceLine" id="cb2-14" title="14"></a>
<a class="sourceLine" id="cb2-15" title="15">hk &lt;-<span class="st"> </span><span class="kw">coef</span>(m)</a>
<a class="sourceLine" id="cb2-16" title="16">alpha0 &lt;-<span class="st"> </span>hk[<span class="dv">1</span>] <span class="co"># Head Shots</span></a>
<a class="sourceLine" id="cb2-17" title="17">beta0 &lt;-<span class="st"> </span>hk[<span class="dv">2</span>] <span class="co"># Total Hits</span></a></code></pre></div>
    </section>
</article>

        </main>

        <footer>
            Site proudly built with 
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
            <br>
            Follow me at:
            <a href="https://twitter.com/LarsESchonander">@LarsESchonander</a>
        </footer>
    </body>
</html>
